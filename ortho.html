<!DOCTYPE html>
<html lang="fr" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Orthodontie - DentalCockpit Pro</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #0066FF;
            --secondary: #00C896;
            --danger: #FF3B30;
            --warning: #FF9500;
            --success: #34C759;
            --bg-main: #0A0E1A;
            --bg-card: #141B2D;
            --bg-hover: #1A2235;
            --text-primary: #FFFFFF;
            --text-secondary: #8B92A8;
            --border: #232938;
            --shadow: rgba(0,0,0,0.3);
        }

        [data-theme="light"] {
            --bg-main: #F5F7FA;
            --bg-card: #FFFFFF;
            --bg-hover: #E8ECF0;
            --text-primary: #1A1D29;
            --text-secondary: #6B7280;
            --border: #E5E7EB;
            --shadow: rgba(0,0,0,0.1);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: var(--bg-main);
            color: var(--text-primary);
            line-height: 1.6;
        }

        .container {
            display: flex;
            min-height: 100vh;
        }

        .sidebar {
            width: 280px;
            background: var(--bg-card);
            border-right: 1px solid var(--border);
            padding: 20px;
            overflow-y: auto;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border);
        }

        .logo-icon {
            font-size: 32px;
        }

        .logo-text {
            font-size: 18px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .nav-section {
            margin-bottom: 25px;
        }

        .nav-title {
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            color: var(--text-secondary);
            margin-bottom: 8px;
            letter-spacing: 0.5px;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 12px;
            border-radius: 8px;
            color: var(--text-secondary);
            text-decoration: none;
            transition: all 0.2s;
            margin-bottom: 4px;
        }

        .nav-item:hover {
            background: var(--bg-hover);
            color: var(--text-primary);
        }

        .nav-item.active {
            background: var(--primary);
            color: white;
        }

        .main-content {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
        }

        .topbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .page-title {
            font-size: 28px;
            font-weight: 700;
        }

        .icon-btn {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            background: var(--bg-card);
            border: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 18px;
        }

        .icon-btn:hover {
            background: var(--bg-hover);
            transform: translateY(-2px);
        }

        .card {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 24px;
            border: 1px solid var(--border);
            box-shadow: 0 4px 12px var(--shadow);
            margin-bottom: 20px;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border);
        }

        .card-title {
            font-size: 18px;
            font-weight: 600;
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-box {
            background: var(--bg-hover);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid var(--border);
        }

        .stat-label {
            font-size: 12px;
            color: var(--text-secondary);
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 24px;
            font-weight: 700;
        }

        .stat-value.danger {
            color: var(--danger);
        }

        .stat-value.warning {
            color: var(--warning);
        }

        .stat-value.success {
            color: var(--success);
        }

        .stat-value.primary {
            color: var(--primary);
        }

        /* Cephalometric Analysis Grid */
        .cephalo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .cephalo-section {
            background: var(--bg-hover);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid var(--border);
        }

        .cephalo-section-title {
            font-size: 14px;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .measurement-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid var(--border);
        }

        .measurement-row:last-child {
            border-bottom: none;
        }

        .measurement-label {
            font-size: 13px;
            color: var(--text-secondary);
        }

        .measurement-value {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .value-number {
            font-weight: 600;
            font-size: 14px;
        }

        .value-normal {
            font-size: 11px;
            color: var(--text-secondary);
            padding: 2px 8px;
            background: var(--bg-card);
            border-radius: 4px;
        }

        .value-badge {
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: 600;
        }

        .value-badge.normal {
            background: rgba(52, 199, 89, 0.2);
            color: var(--success);
        }

        .value-badge.warning {
            background: rgba(255, 149, 0, 0.2);
            color: var(--warning);
        }

        .value-badge.danger {
            background: rgba(255, 59, 48, 0.2);
            color: var(--danger);
        }

        /* Treatment Phases */
        .phases-container {
            display: grid;
            gap: 15px;
        }

        .phase-card {
            background: var(--bg-hover);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid var(--border);
            transition: all 0.2s;
        }

        .phase-card:hover {
            border-color: var(--primary);
        }

        .phase-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .phase-title {
            font-size: 16px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .phase-status {
            padding: 4px 12px;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 600;
        }

        .phase-status.completed {
            background: rgba(52, 199, 89, 0.2);
            color: var(--success);
        }

        .phase-status.in-progress {
            background: rgba(0, 102, 255, 0.2);
            color: var(--primary);
        }

        .phase-status.pending {
            background: rgba(139, 146, 168, 0.2);
            color: var(--text-secondary);
        }

        .phase-duration {
            font-size: 12px;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .phase-description {
            font-size: 13px;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        .progress-bar {
            height: 8px;
            background: var(--bg-card);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 10px;
        }

        .progress-fill {
            height: 100%;
            background: var(--primary);
            transition: width 0.3s;
            border-radius: 4px;
        }

        /* Appliance Selection */
        .appliance-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .appliance-card {
            background: var(--bg-hover);
            padding: 15px;
            border-radius: 10px;
            border: 2px solid var(--border);
            cursor: pointer;
            transition: all 0.2s;
        }

        .appliance-card:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
        }

        .appliance-card.selected {
            border-color: var(--primary);
            background: rgba(0, 102, 255, 0.1);
        }

        .appliance-icon {
            font-size: 32px;
            margin-bottom: 10px;
        }

        .appliance-name {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .appliance-desc {
            font-size: 12px;
            color: var(--text-secondary);
            line-height: 1.4;
        }

        /* Timeline */
        .timeline {
            position: relative;
            padding-left: 30px;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 8px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: var(--border);
        }

        .timeline-item {
            position: relative;
            padding-bottom: 20px;
        }

        .timeline-dot {
            position: absolute;
            left: -26px;
            top: 4px;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: var(--primary);
            border: 3px solid var(--bg-card);
        }

        .timeline-dot.completed {
            background: var(--success);
        }

        .timeline-dot.pending {
            background: var(--text-secondary);
        }

        .timeline-content {
            background: var(--bg-hover);
            padding: 12px;
            border-radius: 8px;
            border: 1px solid var(--border);
        }

        .timeline-date {
            font-size: 11px;
            color: var(--text-secondary);
            margin-bottom: 5px;
        }

        .timeline-title {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .timeline-desc {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .timeline-img {
            width: 100%;
            height: 120px;
            background: var(--bg-card);
            border-radius: 6px;
            margin-top: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
            font-size: 12px;
        }

        /* Duration Calculator */
        .calculator {
            background: var(--bg-hover);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid var(--border);
        }

        .input-group {
            margin-bottom: 15px;
        }

        .input-label {
            font-size: 13px;
            color: var(--text-secondary);
            margin-bottom: 5px;
            display: block;
        }

        .input-field {
            width: 100%;
            padding: 10px;
            border-radius: 8px;
            border: 1px solid var(--border);
            background: var(--bg-card);
            color: var(--text-primary);
            font-family: inherit;
        }

        .input-field:focus {
            outline: none;
            border-color: var(--primary);
        }

        select.input-field {
            cursor: pointer;
        }

        .calculation-result {
            background: var(--bg-card);
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            text-align: center;
        }

        .result-label {
            font-size: 12px;
            color: var(--text-secondary);
            margin-bottom: 5px;
        }

        .result-value {
            font-size: 32px;
            font-weight: 700;
            color: var(--primary);
        }

        /* Dental Arch Visualization */
        .arch-container {
            display: flex;
            flex-direction: column;
            gap: 30px;
            align-items: center;
            padding: 20px;
        }

        .arch-visualization {
            position: relative;
            width: 100%;
            max-width: 600px;
        }

        .arch-svg {
            width: 100%;
            height: auto;
        }

        .arch-label {
            text-align: center;
            font-size: 14px;
            font-weight: 600;
            color: var(--text-secondary);
            margin-bottom: 10px;
        }

        .crowding-indicator {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 15px;
        }

        .indicator-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
        }

        .indicator-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .btn {
            padding: 12px 24px;
            border-radius: 10px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: var(--secondary);
            color: white;
        }

        .btn-secondary:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }

        textarea {
            width: 100%;
            min-height: 100px;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid var(--border);
            background: var(--bg-main);
            color: var(--text-primary);
            font-family: inherit;
            resize: vertical;
        }

        .grid-2 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo">
                <div class="logo-icon">ü¶∑</div>
                <div class="logo-text">DentalCockpit Pro</div>
            </div>
            <div style="text-align: center; padding: 10px 0; margin-bottom: 20px; border-bottom: 1px solid var(--border);">
                <div style="font-size: 10px; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 1px;">Powered by</div>
                <div style="font-size: 14px; font-weight: 700; color: var(--primary); margin-top: 4px;">RCE</div>
            </div>

            <nav>
                <div class="nav-section">
                    <div class="nav-title">Navigation</div>
                    <a href="index.html" class="nav-item">
                        <span>üìä</span>
                        <span>Dashboard Patient</span>
                    </a>
                    <a href="patients.html" class="nav-item">
                        <span>üë•</span>
                        <span>Patients</span>
                    </a>
                    <a href="agenda.html" class="nav-item">
                        <span>üìÖ</span>
                        <span>Agenda</span>
                    </a>
                    <a href="treatment.html" class="nav-item">
                        <span>üéØ</span>
                        <span>Plan de Traitement</span>
                    </a>
                </div>

                <div class="nav-section">
                    <div class="nav-title">Clinique</div>
                    <a href="dental-chart.html" class="nav-item">
                        <span>ü¶∑</span>
                        <span>Sch√©ma Dentaire</span>
                    </a>
                    <a href="paro.html" class="nav-item">
                        <span>üìä</span>
                        <span>Parodontologie</span>
                    </a>
                    <a href="ortho.html" class="nav-item active">
                        <span>üîß</span>
                        <span>Orthodontie</span>
                    </a>
                    <a href="prescriptions.html" class="nav-item">
                        <span>üíä</span>
                        <span>Prescriptions</span>
                    </a>
                </div>

                <div class="nav-section">
                    <div class="nav-title">Imagerie M√©dicale</div>
                    <a href="xrays.html" class="nav-item">
                        <span>üì∑</span>
                        <span>Radiographies X</span>
                    </a>
                    <a href="scanner3d.html" class="nav-item">
                        <span>üî¨</span>
                        <span>Scanner 3D</span>
                    </a>
                    <a href="photos.html" class="nav-item">
                        <span>üñºÔ∏è</span>
                        <span>Photos Intra-orales</span>
                    </a>
                    <a href="camera.html" class="nav-item">
                        <span>üì∏</span>
                        <span>Cam√©ra Temps R√©el</span>
                    </a>
                </div>

                <div class="nav-section">
                    <div class="nav-title">Intelligence Artificielle</div>
                    <a href="ai-analysis.html" class="nav-item">
                        <span>ü§ñ</span>
                        <span>Analyses IA</span>
                    </a>
                    <a href="ai-reports.html" class="nav-item">
                        <span>üìà</span>
                        <span>Rapports Intelligents</span>
                    </a>
                    <a href="ai-history.html" class="nav-item">
                        <span>üîÑ</span>
                        <span>Historique Complet IA</span>
                    </a>
                    <a href="ai-realtime.html" class="nav-item">
                        <span>‚ö°</span>
                        <span>IA Temps R√©el</span>
                    </a>
                </div>

                <div class="nav-section">
                    <div class="nav-title">Administration</div>
                    <a href="inami.html" class="nav-item">
                        <span>üí≥</span>
                        <span>INAMI / e-Health</span>
                    </a>
                    <a href="mutuelles.html" class="nav-item">
                        <span>üè•</span>
                        <span>Mutuelles</span>
                    </a>
                    <a href="certificates.html" class="nav-item">
                        <span>üìÑ</span>
                        <span>Certificats</span>
                    </a>
                    <a href="billing.html" class="nav-item">
                        <span>üìä</span>
                        <span>Facturation</span>
                    </a>
                </div>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <div class="topbar">
                <div class="page-title">üîß Orthodontie - Marie Dubois</div>
                <div class="icon-btn" onclick="toggleTheme()" id="themeToggle" title="Changer le th√®me">
                    üåô
                </div>
            </div>

            <!-- Patient Overview Stats -->
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Vue d'Ensemble du Traitement</div>
                    <button class="btn btn-secondary" onclick="refreshStats()">
                        üîÑ Actualiser
                    </button>
                </div>
                <div class="stats-grid">
                    <div class="stat-box">
                        <div class="stat-label">Dur√©e Estim√©e</div>
                        <div class="stat-value primary">18-24 mois</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Progression</div>
                        <div class="stat-value success">42%</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Classe d'Angle</div>
                        <div class="stat-value">Classe II Div. 1</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Encombrement</div>
                        <div class="stat-value warning">Mod√©r√© (4mm)</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Prochaine Visite</div>
                        <div class="stat-value">14 jours</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Aligneurs Utilis√©s</div>
                        <div class="stat-value primary">12/28</div>
                    </div>
                </div>
            </div>

            <!-- Cephalometric Analysis -->
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Analyse C√©phalom√©trique</div>
                    <button class="btn btn-primary" onclick="saveCephalometrics()">
                        üíæ Enregistrer
                    </button>
                </div>

                <div class="cephalo-grid">
                    <!-- Sagittal Analysis -->
                    <div class="cephalo-section">
                        <div class="cephalo-section-title">Analyse Sagittale</div>
                        <div class="measurement-row">
                            <span class="measurement-label">SNA</span>
                            <div class="measurement-value">
                                <span class="value-number">84.5¬∞</span>
                                <span class="value-normal">N: 82¬±2¬∞</span>
                                <span class="value-badge warning">‚Üë</span>
                            </div>
                        </div>
                        <div class="measurement-row">
                            <span class="measurement-label">SNB</span>
                            <div class="measurement-value">
                                <span class="value-number">78.0¬∞</span>
                                <span class="value-normal">N: 80¬±2¬∞</span>
                                <span class="value-badge warning">‚Üì</span>
                            </div>
                        </div>
                        <div class="measurement-row">
                            <span class="measurement-label">ANB</span>
                            <div class="measurement-value">
                                <span class="value-number">6.5¬∞</span>
                                <span class="value-normal">N: 2¬±2¬∞</span>
                                <span class="value-badge danger">‚Üë‚Üë</span>
                            </div>
                        </div>
                        <div class="measurement-row">
                            <span class="measurement-label">Wits Appraisal</span>
                            <div class="measurement-value">
                                <span class="value-number">4.2 mm</span>
                                <span class="value-normal">N: -1¬±2mm</span>
                                <span class="value-badge danger">‚Üë‚Üë</span>
                            </div>
                        </div>
                        <div class="measurement-row">
                            <span class="measurement-label">Convexit√© Faciale</span>
                            <div class="measurement-value">
                                <span class="value-number">8.5¬∞</span>
                                <span class="value-normal">N: 0¬±4¬∞</span>
                                <span class="value-badge warning">‚Üë</span>
                            </div>
                        </div>
                    </div>

                    <!-- Vertical Analysis -->
                    <div class="cephalo-section">
                        <div class="cephalo-section-title">Analyse Verticale</div>
                        <div class="measurement-row">
                            <span class="measurement-label">FMA (Frankfort-Mandibulaire)</span>
                            <div class="measurement-value">
                                <span class="value-number">26.5¬∞</span>
                                <span class="value-normal">N: 25¬±5¬∞</span>
                                <span class="value-badge normal">‚úì</span>
                            </div>
                        </div>
                        <div class="measurement-row">
                            <span class="measurement-label">SN-GoGn</span>
                            <div class="measurement-value">
                                <span class="value-number">32.0¬∞</span>
                                <span class="value-normal">N: 32¬±5¬∞</span>
                                <span class="value-badge normal">‚úì</span>
                            </div>
                        </div>
                        <div class="measurement-row">
                            <span class="measurement-label">Hauteur Faciale Ant.</span>
                            <div class="measurement-value">
                                <span class="value-number">118 mm</span>
                                <span class="value-normal">N: 115-125mm</span>
                                <span class="value-badge normal">‚úì</span>
                            </div>
                        </div>
                        <div class="measurement-row">
                            <span class="measurement-label">Hauteur Faciale Post.</span>
                            <div class="measurement-value">
                                <span class="value-number">82 mm</span>
                                <span class="value-normal">N: 75-85mm</span>
                                <span class="value-badge normal">‚úì</span>
                            </div>
                        </div>
                        <div class="measurement-row">
                            <span class="measurement-label">Ratio HFP/HFA</span>
                            <div class="measurement-value">
                                <span class="value-number">69.5%</span>
                                <span class="value-normal">N: 62-68%</span>
                                <span class="value-badge normal">‚úì</span>
                            </div>
                        </div>
                    </div>

                    <!-- Dental Analysis -->
                    <div class="cephalo-section">
                        <div class="cephalo-section-title">Analyse Dentaire</div>
                        <div class="measurement-row">
                            <span class="measurement-label">Incisive Sup./SN</span>
                            <div class="measurement-value">
                                <span class="value-number">112¬∞</span>
                                <span class="value-normal">N: 103¬±6¬∞</span>
                                <span class="value-badge warning">‚Üë</span>
                            </div>
                        </div>
                        <div class="measurement-row">
                            <span class="measurement-label">Incisive Inf./Mand.</span>
                            <div class="measurement-value">
                                <span class="value-number">95¬∞</span>
                                <span class="value-normal">N: 90¬±5¬∞</span>
                                <span class="value-badge normal">‚úì</span>
                            </div>
                        </div>
                        <div class="measurement-row">
                            <span class="measurement-label">Angle Interincisif</span>
                            <div class="measurement-value">
                                <span class="value-number">122¬∞</span>
                                <span class="value-normal">N: 131¬±6¬∞</span>
                                <span class="value-badge warning">‚Üì</span>
                            </div>
                        </div>
                        <div class="measurement-row">
                            <span class="measurement-label">Overjet</span>
                            <div class="measurement-value">
                                <span class="value-number">7.2 mm</span>
                                <span class="value-normal">N: 2-4mm</span>
                                <span class="value-badge danger">‚Üë‚Üë</span>
                            </div>
                        </div>
                        <div class="measurement-row">
                            <span class="measurement-label">Overbite</span>
                            <div class="measurement-value">
                                <span class="value-number">4.5 mm</span>
                                <span class="value-normal">N: 2-4mm</span>
                                <span class="value-badge warning">‚Üë</span>
                            </div>
                        </div>
                    </div>

                    <!-- Soft Tissue Analysis -->
                    <div class="cephalo-section">
                        <div class="cephalo-section-title">Analyse Tissus Mous</div>
                        <div class="measurement-row">
                            <span class="measurement-label">Angle Nasolabial</span>
                            <div class="measurement-value">
                                <span class="value-number">102¬∞</span>
                                <span class="value-normal">N: 90-110¬∞</span>
                                <span class="value-badge normal">‚úì</span>
                            </div>
                        </div>
                        <div class="measurement-row">
                            <span class="measurement-label">Ligne E (L√®vre Sup.)</span>
                            <div class="measurement-value">
                                <span class="value-number">2.5 mm</span>
                                <span class="value-normal">N: -2¬±2mm</span>
                                <span class="value-badge warning">‚Üë</span>
                            </div>
                        </div>
                        <div class="measurement-row">
                            <span class="measurement-label">Ligne E (L√®vre Inf.)</span>
                            <div class="measurement-value">
                                <span class="value-number">0.5 mm</span>
                                <span class="value-normal">N: 0¬±2mm</span>
                                <span class="value-badge normal">‚úì</span>
                            </div>
                        </div>
                        <div class="measurement-row">
                            <span class="measurement-label">Protrusion L√®vre Sup.</span>
                            <div class="measurement-value">
                                <span class="value-number">4.8 mm</span>
                                <span class="value-normal">N: 3-5mm</span>
                                <span class="value-badge normal">‚úì</span>
                            </div>
                        </div>
                        <div class="measurement-row">
                            <span class="measurement-label">Angle Z (Merrifield)</span>
                            <div class="measurement-value">
                                <span class="value-number">72¬∞</span>
                                <span class="value-normal">N: 75-80¬∞</span>
                                <span class="value-badge warning">‚Üì</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Treatment Plan Phases & Duration Calculator -->
            <div class="grid-2">
                <!-- Treatment Phases -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Phases du Traitement</div>
                    </div>
                    <div class="phases-container">
                        <div class="phase-card">
                            <div class="phase-header">
                                <div class="phase-title">
                                    <span>1Ô∏è‚É£</span>
                                    <span>Alignement Initial</span>
                                </div>
                                <span class="phase-status completed">Termin√©</span>
                            </div>
                            <div class="phase-duration">Dur√©e: 6 mois</div>
                            <div class="phase-description">
                                Alignement des dents ant√©rieures et nivellement des arcades. Correction de la rotation des incisives lat√©rales sup√©rieures.
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 100%;"></div>
                            </div>
                        </div>

                        <div class="phase-card">
                            <div class="phase-header">
                                <div class="phase-title">
                                    <span>2Ô∏è‚É£</span>
                                    <span>Fermeture des Espaces</span>
                                </div>
                                <span class="phase-status in-progress">En cours</span>
                            </div>
                            <div class="phase-duration">Dur√©e: 8-10 mois</div>
                            <div class="phase-description">
                                Fermeture des espaces d'extraction (14, 24). R√©traction des incisives sup√©rieures pour r√©duction de l'overjet. Utilisation de mini-vis d'ancrage.
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 60%;"></div>
                            </div>
                        </div>

                        <div class="phase-card">
                            <div class="phase-header">
                                <div class="phase-title">
                                    <span>3Ô∏è‚É£</span>
                                    <span>Finition et D√©tails</span>
                                </div>
                                <span class="phase-status pending">√Ä venir</span>
                            </div>
                            <div class="phase-duration">Dur√©e: 4-6 mois</div>
                            <div class="phase-description">
                                Optimisation de l'occlusion, coordination des arcades, parall√©lisme radiculaire. Ajustements des torques et angulations.
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 0%;"></div>
                            </div>
                        </div>

                        <div class="phase-card">
                            <div class="phase-header">
                                <div class="phase-title">
                                    <span>4Ô∏è‚É£</span>
                                    <span>Contention</span>
                                </div>
                                <span class="phase-status pending">√Ä venir</span>
                            </div>
                            <div class="phase-duration">Dur√©e: Permanente</div>
                            <div class="phase-description">
                                Contention fixe linguale 33-43. Goutti√®re de contention nocturne maxillaire. Suivi √† long terme recommand√©.
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 0%;"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Duration Calculator -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Calculateur de Dur√©e</div>
                    </div>
                    <div class="calculator">
                        <div class="input-group">
                            <label class="input-label">Type de Malocclusion</label>
                            <select class="input-field" id="malocclusion" onchange="calculateDuration()">
                                <option value="class1">Classe I (Normo-occlusion)</option>
                                <option value="class2-div1" selected>Classe II Division 1</option>
                                <option value="class2-div2">Classe II Division 2</option>
                                <option value="class3">Classe III</option>
                            </select>
                        </div>

                        <div class="input-group">
                            <label class="input-label">S√©v√©rit√© de l'Encombrement</label>
                            <select class="input-field" id="crowding" onchange="calculateDuration()">
                                <option value="mild">L√©ger (1-3mm)</option>
                                <option value="moderate" selected>Mod√©r√© (4-6mm)</option>
                                <option value="severe">S√©v√®re (>6mm)</option>
                            </select>
                        </div>

                        <div class="input-group">
                            <label class="input-label">Extractions N√©cessaires</label>
                            <select class="input-field" id="extractions" onchange="calculateDuration()">
                                <option value="0">Aucune</option>
                                <option value="2" selected>2 pr√©molaires</option>
                                <option value="4">4 pr√©molaires</option>
                            </select>
                        </div>

                        <div class="input-group">
                            <label class="input-label">√Çge du Patient</label>
                            <select class="input-field" id="age" onchange="calculateDuration()">
                                <option value="child">Enfant (7-12 ans)</option>
                                <option value="teen" selected>Adolescent (13-18 ans)</option>
                                <option value="adult">Adulte (>18 ans)</option>
                            </select>
                        </div>

                        <div class="input-group">
                            <label class="input-label">Compliance Pr√©vue</label>
                            <select class="input-field" id="compliance" onchange="calculateDuration()">
                                <option value="excellent" selected>Excellente</option>
                                <option value="good">Bonne</option>
                                <option value="fair">Moyenne</option>
                                <option value="poor">Faible</option>
                            </select>
                        </div>

                        <div class="calculation-result">
                            <div class="result-label">Dur√©e Estim√©e du Traitement</div>
                            <div class="result-value" id="estimatedDuration">18-24 mois</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Appliance Selection -->
            <div class="card">
                <div class="card-header">
                    <div class="card-title">S√©lection de l'Appareillage</div>
                    <button class="btn btn-primary" onclick="saveAppliance()">
                        üíæ Confirmer
                    </button>
                </div>
                <div class="appliance-grid">
                    <div class="appliance-card" onclick="selectAppliance('braces')">
                        <div class="appliance-icon">ü¶∑</div>
                        <div class="appliance-name">Brackets M√©talliques</div>
                        <div class="appliance-desc">
                            Appareil fixe traditionnel. Contr√¥le pr√©cis des mouvements. Id√©al pour les cas complexes. Durable et √©conomique.
                        </div>
                    </div>

                    <div class="appliance-card selected" onclick="selectAppliance('invisalign')">
                        <div class="appliance-icon">üì±</div>
                        <div class="appliance-name">Aligneurs Invisibles (Invisalign)</div>
                        <div class="appliance-desc">
                            Goutti√®res transparentes amovibles. Esth√©tique optimal. Hygi√®ne facilit√©e. 22h/jour recommand√©. Changement tous les 7-14 jours.
                        </div>
                    </div>

                    <div class="appliance-card" onclick="selectAppliance('ceramic')">
                        <div class="appliance-icon">üíé</div>
                        <div class="appliance-name">Brackets C√©ramiques</div>
                        <div class="appliance-desc">
                            Appareil fixe esth√©tique. Brackets couleur dent. Moins visible que le m√©tal. Bon compromis esth√©tique/efficacit√©.
                        </div>
                    </div>

                    <div class="appliance-card" onclick="selectAppliance('lingual')">
                        <div class="appliance-icon">üîí</div>
                        <div class="appliance-name">Orthodontie Linguale</div>
                        <div class="appliance-desc">
                            Brackets fix√©s face interne des dents. Totalement invisible. Technique sp√©cialis√©e. P√©riode d'adaptation plus longue.
                        </div>
                    </div>

                    <div class="appliance-card" onclick="selectAppliance('functional')">
                        <div class="appliance-icon">‚öôÔ∏è</div>
                        <div class="appliance-name">Appareils Fonctionnels</div>
                        <div class="appliance-desc">
                            Twin-block, Activateur, Herbst. Correction des d√©calages squelettiques. Id√©al en p√©riode de croissance. Souvent en Phase 1.
                        </div>
                    </div>

                    <div class="appliance-card" onclick="selectAppliance('expansion')">
                        <div class="appliance-icon">üîÑ</div>
                        <div class="appliance-name">Expansion Palatine</div>
                        <div class="appliance-desc">
                            Quad-helix ou disjoncteur. √âlargissement de l'arcade maxillaire. Traitement des occlusions crois√©es. Phase pr√©paratoire.
                        </div>
                    </div>
                </div>
            </div>

            <!-- Progress Timeline -->
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Chronologie et Suivi Photographique</div>
                    <button class="btn btn-secondary" onclick="addTimelineEvent()">
                        ‚ûï Ajouter √âv√©nement
                    </button>
                </div>
                <div class="timeline">
                    <div class="timeline-item">
                        <div class="timeline-dot completed"></div>
                        <div class="timeline-content">
                            <div class="timeline-date">15 Mars 2024</div>
                            <div class="timeline-title">üìã Bilan Initial & Records</div>
                            <div class="timeline-desc">
                                Empreintes num√©riques, t√©l√©radiographie de profil, panoramique, photos intra et extra-orales. Analyse c√©phalom√©trique compl√®te.
                            </div>
                            <div class="timeline-img">[Photos initiales - Vue frontale, lat√©rale, occlusale]</div>
                        </div>
                    </div>

                    <div class="timeline-item">
                        <div class="timeline-dot completed"></div>
                        <div class="timeline-content">
                            <div class="timeline-date">22 Mars 2024</div>
                            <div class="timeline-title">ü¶∑ Extractions Pr√©molaires</div>
                            <div class="timeline-desc">
                                Extractions des pr√©molaires 14 et 24 sous anesth√©sie locale. Cicatrisation normale. D√©but alignement dans 2 semaines.
                            </div>
                        </div>
                    </div>

                    <div class="timeline-item">
                        <div class="timeline-dot completed"></div>
                        <div class="timeline-content">
                            <div class="timeline-date">5 Avril 2024</div>
                            <div class="timeline-title">üì± Pose Aligneurs - S√©rie 1</div>
                            <div class="timeline-desc">
                                D√©but du traitement Invisalign. Attachements pos√©s sur 11, 21, 16, 26. Instructions port 22h/jour. Premi√®re s√©rie: 8 aligneurs.
                            </div>
                            <div class="timeline-img">[Photos T0 - D√©but traitement]</div>
                        </div>
                    </div>

                    <div class="timeline-item">
                        <div class="timeline-dot completed"></div>
                        <div class="timeline-content">
                            <div class="timeline-date">3 Juillet 2024</div>
                            <div class="timeline-title">üìä Contr√¥le 3 mois</div>
                            <div class="timeline-desc">
                                Alignement satisfaisant secteur ant√©rieur. Rotation 12 et 22 corrig√©e. Overjet r√©duit de 2mm. Compliance excellente. Passage s√©rie 2.
                            </div>
                            <div class="timeline-img">[Photos T+3 mois - Progression visible]</div>
                        </div>
                    </div>

                    <div class="timeline-item">
                        <div class="timeline-dot completed"></div>
                        <div class="timeline-content">
                            <div class="timeline-date">15 Octobre 2024</div>
                            <div class="timeline-title">‚öôÔ∏è Pose Mini-vis d'Ancrage</div>
                            <div class="timeline-desc">
                                Mini-vis entre 15-16 et 25-26 pour ancrage post√©rieur renforc√©. √âlastiques de Classe II ajout√©s. Phase de r√©traction active.
                            </div>
                        </div>
                    </div>

                    <div class="timeline-item">
                        <div class="timeline-dot in-progress"></div>
                        <div class="timeline-content">
                            <div class="timeline-date">12 Novembre 2024 (Aujourd'hui)</div>
                            <div class="timeline-title">üîÑ √âvaluation √† Mi-Parcours</div>
                            <div class="timeline-desc">
                                Aligneur 12/28. Fermeture espaces 60% compl√®te. Overjet r√©duit √† 4.5mm. Occlusion s'am√©liore. Planification refinement.
                            </div>
                            <div class="timeline-img">[Photos actuelles - Progression 42%]</div>
                        </div>
                    </div>

                    <div class="timeline-item">
                        <div class="timeline-dot pending"></div>
                        <div class="timeline-content">
                            <div class="timeline-date">F√©vrier 2025 (Pr√©vu)</div>
                            <div class="timeline-title">‚ú® Fin S√©rie Initiale</div>
                            <div class="timeline-desc">
                                Fin des 28 aligneurs. Nouvelles empreintes pour √©valuation. Probable refinement 6-8 aligneurs suppl√©mentaires.
                            </div>
                        </div>
                    </div>

                    <div class="timeline-item">
                        <div class="timeline-dot pending"></div>
                        <div class="timeline-content">
                            <div class="timeline-date">Juin 2025 (Pr√©vu)</div>
                            <div class="timeline-title">üéØ Fin de Traitement Actif</div>
                            <div class="timeline-desc">
                                D√©baguage, photos finales, radiographies de contr√¥le. Pose contention fixe linguale. Goutti√®res de contention nocturnes.
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Dental Arch Visualization -->
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Visualisation des Arcades Dentaires</div>
                    <button class="btn btn-primary" onclick="toggleArchView()">
                        üîÑ Changer Vue
                    </button>
                </div>
                <div class="arch-container">
                    <!-- Upper Arch -->
                    <div class="arch-visualization">
                        <div class="arch-label">ARCADE SUP√âRIEURE</div>
                        <svg class="arch-svg" viewBox="0 0 400 200" xmlns="http://www.w3.org/2000/svg">
                            <!-- Arch outline -->
                            <path d="M 50,180 Q 50,50 200,30 Q 350,50 350,180"
                                  fill="none"
                                  stroke="var(--border)"
                                  stroke-width="2"
                                  stroke-dasharray="5,5"/>

                            <!-- Teeth positions with crowding indicators -->
                            <!-- Right side -->
                            <circle cx="70" cy="150" r="12" fill="var(--text-primary)" opacity="0.3"/>
                            <circle cx="85" cy="120" r="12" fill="var(--text-primary)" opacity="0.3"/>
                            <circle cx="100" cy="95" r="12" fill="var(--warning)"/>
                            <circle cx="118" cy="75" r="10" fill="var(--danger)"/>
                            <circle cx="140" cy="62" r="10" fill="var(--danger)"/>
                            <circle cx="165" cy="55" r="10" fill="var(--success)"/>
                            <circle cx="190" cy="52" r="10" fill="var(--success)"/>

                            <!-- Left side -->
                            <circle cx="210" cy="52" r="10" fill="var(--success)"/>
                            <circle cx="235" cy="55" r="10" fill="var(--success)"/>
                            <circle cx="260" cy="62" r="10" fill="var(--danger)"/>
                            <circle cx="282" cy="75" r="10" fill="var(--danger)"/>
                            <circle cx="300" cy="95" r="12" fill="var(--warning)"/>
                            <circle cx="315" cy="120" r="12" fill="var(--text-primary)" opacity="0.3"/>
                            <circle cx="330" cy="150" r="12" fill="var(--text-primary)" opacity="0.3"/>

                            <!-- Crowding/spacing indicators -->
                            <line x1="118" y1="75" x2="132" y2="68" stroke="var(--danger)" stroke-width="2"/>
                            <line x1="132" y1="68" x2="140" y2="62" stroke="var(--danger)" stroke-width="2"/>
                            <text x="125" y="90" fill="var(--danger)" font-size="10">-2mm</text>

                            <line x1="260" y1="62" x2="268" y2="68" stroke="var(--danger)" stroke-width="2"/>
                            <line x1="268" y1="68" x2="282" y2="75" stroke="var(--danger)" stroke-width="2"/>
                            <text x="265" y="90" fill="var(--danger)" font-size="10">-2mm</text>

                            <!-- Extraction spaces -->
                            <rect x="95" y="88" width="15" height="15" fill="none" stroke="var(--warning)" stroke-width="2" stroke-dasharray="3,3"/>
                            <text x="95" y="110" fill="var(--warning)" font-size="9">Ext. 14</text>

                            <rect x="290" y="88" width="15" height="15" fill="none" stroke="var(--warning)" stroke-width="2" stroke-dasharray="3,3"/>
                            <text x="285" y="110" fill="var(--warning)" font-size="9">Ext. 24</text>
                        </svg>
                        <div class="crowding-indicator">
                            <div class="indicator-item">
                                <div class="indicator-dot" style="background: var(--success);"></div>
                                <span>Align√©</span>
                            </div>
                            <div class="indicator-item">
                                <div class="indicator-dot" style="background: var(--danger);"></div>
                                <span>Encombrement</span>
                            </div>
                            <div class="indicator-item">
                                <div class="indicator-dot" style="background: var(--warning);"></div>
                                <span>Espace Extraction</span>
                            </div>
                            <div class="indicator-item">
                                <div class="indicator-dot" style="background: var(--text-primary); opacity: 0.3;"></div>
                                <span>Sagesse</span>
                            </div>
                        </div>
                    </div>

                    <!-- Lower Arch -->
                    <div class="arch-visualization">
                        <div class="arch-label">ARCADE INF√âRIEURE</div>
                        <svg class="arch-svg" viewBox="0 0 400 200" xmlns="http://www.w3.org/2000/svg">
                            <!-- Arch outline -->
                            <path d="M 50,20 Q 50,150 200,170 Q 350,150 350,20"
                                  fill="none"
                                  stroke="var(--border)"
                                  stroke-width="2"
                                  stroke-dasharray="5,5"/>

                            <!-- Teeth positions -->
                            <!-- Right side -->
                            <circle cx="70" cy="50" r="12" fill="var(--text-primary)" opacity="0.3"/>
                            <circle cx="85" cy="80" r="12" fill="var(--text-primary)" opacity="0.3"/>
                            <circle cx="100" cy="105" r="12" fill="var(--success)"/>
                            <circle cx="118" cy="125" r="10" fill="var(--success)"/>
                            <circle cx="142" cy="138" r="10" fill="var(--warning)"/>
                            <circle cx="168" cy="145" r="10" fill="var(--warning)"/>
                            <circle cx="192" cy="148" r="10" fill="var(--success)"/>

                            <!-- Left side -->
                            <circle cx="208" cy="148" r="10" fill="var(--success)"/>
                            <circle cx="232" cy="145" r="10" fill="var(--warning)"/>
                            <circle cx="258" cy="138" r="10" fill="var(--warning)"/>
                            <circle cx="282" cy="125" r="10" fill="var(--success)"/>
                            <circle cx="300" cy="105" r="12" fill="var(--success)"/>
                            <circle cx="315" cy="80" r="12" fill="var(--text-primary)" opacity="0.3"/>
                            <circle cx="330" cy="50" r="12" fill="var(--text-primary)" opacity="0.3"/>

                            <!-- Mild crowding indicator -->
                            <line x1="142" y1="138" x2="155" y2="141" stroke="var(--warning)" stroke-width="2"/>
                            <line x1="155" y1="141" x2="168" y2="145" stroke="var(--warning)" stroke-width="2"/>
                            <text x="148" y="130" fill="var(--warning)" font-size="10">-1mm</text>

                            <line x1="232" y1="145" x2="245" y2="141" stroke="var(--warning)" stroke-width="2"/>
                            <line x1="245" y1="141" x2="258" y2="138" stroke="var(--warning)" stroke-width="2"/>
                            <text x="235" y="130" fill="var(--warning)" font-size="10">-1mm</text>
                        </svg>
                        <div class="crowding-indicator">
                            <div class="indicator-item">
                                <span style="font-size: 12px; color: var(--text-secondary);">
                                    Encombrement total: 4mm (2mm maxillaire apr√®s extractions, 2mm mandibulaire)
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Treatment Notes -->
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Notes Orthodontiques</div>
                </div>
                <textarea id="orthoNotes" placeholder="Observations orthodontiques, objectifs de traitement, notes cliniques...">Dossier orthodontique - Marie Dubois
Date: 12/11/2024

DIAGNOSTIC:
- Classe II squelettique et dentaire Division 1
- Malocclusion de Classe II d'Angle (relation molaire 1/2 unit√© Classe II)
- Overjet augment√©: 7.2mm (Norme: 2-4mm)
- Overbite augment√©: 4.5mm
- Encombrement mod√©r√© maxillaire: 4mm
- Encombrement l√©ger mandibulaire: 2mm
- Proalv√©olie sup√©rieure
- R√©tromandibulie relative (SNB: 78¬∞)
- Dents 18, 28 (absentes/extraites)

√âTIOLOGIE:
- Composante squelettique mod√©r√©e (ANB: 6.5¬∞)
- Composante dento-alv√©olaire significative
- Respiration buccale partielle (historique)
- D√©glutition atypique r√©siduelle

OBJECTIFS DE TRAITEMENT:
1. Correction relation Classe II vers Classe I
2. R√©duction overjet √† 2-3mm
3. Normalisation overbite
4. Alignement des arcades
5. Am√©lioration du profil facial
6. √âtablissement d'une occlusion fonctionnelle stable
7. Am√©lioration esth√©tique du sourire

PLAN DE TRAITEMENT:
- Extractions: 14, 24 (r√©alis√©es)
- Alignement initial: Invisalign (compl√©t√©)
- R√©traction ant√©rieure maxillaire avec ancrage mini-vis
- M√©canique de Classe II: √©lastiques intermaxillaires
- Dur√©e estim√©e: 18-24 mois
- Contention: fixe linguale + goutti√®res nocturnes

PROGRESSION ACTUELLE (Mois 8):
- Alignement satisfaisant
- Fermeture espaces extraction: 60%
- Overjet: 4.5mm (am√©lioration de 2.7mm)
- Compliance √©lastiques: excellente
- Hygi√®ne: tr√®s bonne
- Confort: aucune plainte

PROCHAINES √âTAPES:
1. Continuer r√©traction ant√©rieure (4 mois)
2. Phase de finition et coordination (4-6 mois)
3. Refinement si n√©cessaire (6-8 aligneurs)
4. D√©baguage et contention

OBSERVATIONS:
- Patient tr√®s motiv√©e et coop√©rative
- Port aligneurs: 22h/jour respect√©
- √âlastiques port√©s correctement
- Mini-vis stables, aucune inflammation
- R√©sultats conformes aux pr√©visions ClinCheck

Prochain RDV: 26/11/2024 - Contr√¥le routine + photos
RDV suivant: 10/12/2024 - Changement s√©rie aligneurs</textarea>
                <button class="btn btn-primary" onclick="saveNotes()" style="margin-top: 12px;">
                    üíæ Enregistrer les notes
                </button>
            </div>
        </main>
    </div>

    <script>
        // Theme management
        function toggleTheme() {
            const html = document.documentElement;
            const themeToggle = document.getElementById('themeToggle');
            const currentTheme = html.getAttribute('data-theme');

            if (currentTheme === 'light') {
                html.setAttribute('data-theme', 'dark');
                themeToggle.textContent = 'üåô';
                localStorage.setItem('theme', 'dark');
            } else {
                html.setAttribute('data-theme', 'light');
                themeToggle.textContent = '‚òÄÔ∏è';
                localStorage.setItem('theme', 'light');
            }
        }

        function loadTheme() {
            const savedTheme = localStorage.getItem('theme') || 'dark';
            const html = document.documentElement;
            const themeToggle = document.getElementById('themeToggle');

            if (savedTheme === 'light') {
                html.setAttribute('data-theme', 'light');
                if (themeToggle) themeToggle.textContent = '‚òÄÔ∏è';
            } else {
                html.setAttribute('data-theme', 'dark');
                if (themeToggle) themeToggle.textContent = 'üåô';
            }
        }

        // Duration Calculator
        function calculateDuration() {
            const malocclusion = document.getElementById('malocclusion').value;
            const crowding = document.getElementById('crowding').value;
            const extractions = parseInt(document.getElementById('extractions').value);
            const age = document.getElementById('age').value;
            const compliance = document.getElementById('compliance').value;

            let baseMonths = 12;

            // Malocclusion impact
            const malocclusionImpact = {
                'class1': 0,
                'class2-div1': 6,
                'class2-div2': 4,
                'class3': 8
            };
            baseMonths += malocclusionImpact[malocclusion];

            // Crowding impact
            const crowdingImpact = {
                'mild': 2,
                'moderate': 4,
                'severe': 8
            };
            baseMonths += crowdingImpact[crowding];

            // Extractions impact
            baseMonths += extractions * 3;

            // Age impact
            const ageImpact = {
                'child': -2,
                'teen': 0,
                'adult': 4
            };
            baseMonths += ageImpact[age];

            // Compliance impact
            const complianceImpact = {
                'excellent': 0,
                'good': 2,
                'fair': 4,
                'poor': 8
            };
            baseMonths += complianceImpact[compliance];

            // Calculate range
            const minMonths = Math.max(6, baseMonths - 3);
            const maxMonths = baseMonths + 6;

            document.getElementById('estimatedDuration').textContent = `${minMonths}-${maxMonths} mois`;
        }

        // Appliance Selection
        let selectedApplianceType = 'invisalign';

        function selectAppliance(type) {
            selectedApplianceType = type;

            // Remove all selected classes
            document.querySelectorAll('.appliance-card').forEach(card => {
                card.classList.remove('selected');
            });

            // Add selected class to clicked card
            event.currentTarget.classList.add('selected');

            console.log('Appareillage s√©lectionn√©:', type);
        }

        function saveAppliance() {
            const applianceNames = {
                'braces': 'Brackets M√©talliques',
                'invisalign': 'Aligneurs Invisibles (Invisalign)',
                'ceramic': 'Brackets C√©ramiques',
                'lingual': 'Orthodontie Linguale',
                'functional': 'Appareils Fonctionnels',
                'expansion': 'Expansion Palatine'
            };

            alert(`‚úÖ Appareillage confirm√©!\n\nType s√©lectionn√©: ${applianceNames[selectedApplianceType]}\n\nLes informations ont √©t√© enregistr√©es dans le plan de traitement.`);
            console.log('Appareillage sauvegard√©:', selectedApplianceType);
        }

        // Cephalometrics
        function saveCephalometrics() {
            const cephaloData = {
                patient: 'Marie Dubois',
                date: new Date().toISOString(),
                measurements: {
                    sagittal: {
                        SNA: 84.5,
                        SNB: 78.0,
                        ANB: 6.5,
                        Wits: 4.2,
                        facialConvexity: 8.5
                    },
                    vertical: {
                        FMA: 26.5,
                        SNGoGn: 32.0,
                        anteriorFacialHeight: 118,
                        posteriorFacialHeight: 82,
                        ratio: 69.5
                    },
                    dental: {
                        upperIncisorSN: 112,
                        lowerIncisorMand: 95,
                        interincisal: 122,
                        overjet: 7.2,
                        overbite: 4.5
                    },
                    softTissue: {
                        nasolabial: 102,
                        upperLipE: 2.5,
                        lowerLipE: 0.5,
                        upperLipProtrusion: 4.8,
                        zAngle: 72
                    }
                }
            };

            console.log('Analyse c√©phalom√©trique sauvegard√©e:', cephaloData);
            alert('‚úÖ Analyse c√©phalom√©trique enregistr√©e avec succ√®s!\n\nToutes les mesures ont √©t√© sauvegard√©es dans le dossier patient.');
        }

        // Timeline
        function addTimelineEvent() {
            alert('üì∏ Fonction d\'ajout d\'√©v√©nement\n\nPermettra d\'ajouter:\n- Nouvelle date\n- Description de l\'√©v√©nement\n- Upload de photos/radiographies\n- Notes cliniques');
            console.log('Ajout √©v√©nement timeline');
        }

        // Arch Visualization
        let archViewMode = 'occlusal';

        function toggleArchView() {
            archViewMode = archViewMode === 'occlusal' ? 'frontal' : 'occlusal';
            alert(`üîÑ Vue chang√©e: ${archViewMode === 'occlusal' ? 'Vue Occlusale' : 'Vue Frontale'}\n\nDans une impl√©mentation compl√®te, cela afficherait diff√©rentes perspectives des arcades dentaires.`);
            console.log('Vue des arcades:', archViewMode);
        }

        // Notes
        function saveNotes() {
            const notes = document.getElementById('orthoNotes').value;
            console.log('Notes orthodontiques sauvegard√©es:', notes);
            alert('‚úÖ Notes orthodontiques enregistr√©es avec succ√®s!');
        }

        // Refresh Stats
        function refreshStats() {
            console.log('Statistiques actualis√©es');
            alert('üîÑ Statistiques actualis√©es!\n\nLes donn√©es ont √©t√© mises √† jour avec les derni√®res mesures.');
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            loadTheme();
            calculateDuration();
        });
    </script>
</body>
</html>
